# Oct 31 Thu

## SE-227::CSE

### Consistency

你要求什么样的 Consistency？

是类似于 DNS 一样的「只要在一定时间之后可以保持一致」，还是严格地一呼百应式 Consistency？

这两者的性能开销区别是很大的。当然应用场景也是大不相同的。

### All or Nothing

「要么全都有要么全完蛋」

A/N 是指一件事情要么做完了，要么无效果；不允许出现一件做了一半的事情。

### Before and After

B/A 指的是一件事情完成的先后顺序必须一定。

例如，制定了 B/A 的 T~1~ 和 T~2~ 允许出现三种情况：

*   T~1~、T~2~ 都没完成
*   T~1~ 完成了，T~2~ 没完成
*   T~1~、T~2~ 都完成了

只要不是 T~2~ 完成了且 T~1~ 没完成，就都是可以接受的情况。

B/A 并没有硬性规定说你一定要保持操作的 Atomic，加一把大锁。只要可以保证 B/A 就好了。

### Commit Point

Commit Point，意即对一个 Transaction 来讲，Commit 的时机。

什么时候 Commit，也就是说什么时候声明「我这个 Transaction 完成了，即使没完成也是可恢复的了」？

当我们利用到 Replica 的时候（看书，那个 old => bad => new），在第四步 old => bad 的一瞬间就可以提交 Commit 了。因为在这一步之后就可以确保我们的 new 数据已经生效了。即使后面任何一步突然断电也可以恢复了。

这时候就可以 Commit 了。

## SE-344::CG

今天我们主要讲一讲「物体的变形」。

### 物体的变形

我们直接使用表面多边形的变化来实现物体的变形。

但这样的话我们就很难保证一件事情：如何保证物体体积不变？

日常生活中的大部分物体变形都不改变其体积的。

如果我们的动画模拟让体积不停变化，就会看起来很神秘又奇怪。

但是我们用「表面多边形」来表示物体的情况并非是真正地构筑了一个立方体，而仅仅做了个表面工作而已。

### 其他的体表示

那么除了用表面多边形……我们就没有别的办法了吗。

#### 六叉树／十四叉树

想一想 CV 里面的四叉树／八叉树表示方法。扩展到三维空间里…就是六叉树和十四叉树了。

#### 扫描线式

直接切成极薄的一层层横截面，然后对每一层进行记录。

类似于医院里的 CT, Computed Tomography。计算机断层成像。

###碰撞检测

####BST 树场景表示

为什么 BST 很好用呢？

它可以保证严格的 $log(n)$ 查找复杂度。减少不必要的查找。为什么这么重要呢？

因为我们在进行碰撞检测的时候，最重要的事情就是一一对每一个场景中的物体进行检查，观察他们是否有 Hit。

如果我们采用一般的算法进行比较，必然会造成反复比较很多不可能碰撞的物体。

如果我们提前对每个场景进行分块，得到的两个字块放在 BST 树的两枝中。

这样在查找的时候就能减少无谓的 Hit Check 了。

大概吧。

####包围球／包围盒

为了简化碰撞检测…煞费苦心。

因为对一个不规则的几何题来说，进行 Hit Check 是比较麻烦费时的。

所以我们提前把每一个对象都附加一个属性，一个可以完全包围他的包围球（三维）或包围盒（二维）。

先对这个包围体进行碰撞检测。

如果这个扩大化的包围体都不会产生 Hit，那就没有再进一步进行细节计算的必要了。

主要还是因为判断球／圆／立方体／长方形是否相交很简单。

而世界上两个物体碰撞的概率又极低。

因此可以采用这种办法。

### 分形几何模型表示法

*   Julia 分形
*   Mandelbrot 分形
*   叶脉
*   谢尔宾斯基三角形

最大的特点是。自相似。

自己的一部分和整体具有相似性。

>   特别的，还有一种叫做『自逆分形』的特别分形。Q: 举个例子。

### 植物描述

上面的分形几何最适合表示的就是「植物」了。

### 粒子系统

粒子系统独立于整个世界，使用符合牛顿第二定律的「只有加速度 $a$ 可以突变」来管理其运动。

位置不可以突变。速度也不可以突变。这样看起来才能显得自然。

粒子的关键信息：

*   位置
*   寿命
*   质量
*   速度
*   随机量
*   etc.

粒子系统本身也有位置，有一个世界坐标。

粒子发射速度（出生的时候速度），整个粒子系统的力场等。

注意，粒子本身不产生投影。

粒子不反射光线。

（有的粒子还会发光呢。）

（大部分）粒子不互相碰撞。